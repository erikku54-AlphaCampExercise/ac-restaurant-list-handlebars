
<h1 class="mb-1 restaurant-show-title">修改餐廳</h1>
<div class="container">
  <div class="row">
    <div class="col-12 col-md-10 mx-auto">

    
    <p class="mb-4">(*為必填欄位)</p>

    <form action="/restaurants/edit/{{restaurant._id}}" method="post" novalidate>

        <div class="mb-3">
            <label for="name" class="form-label">餐廳名稱*</label>
            <input type="text" class="form-control" id="name" name="name" 
                   placeholder="請輸入餐廳名稱..." value="{{restaurant.name}}" required>
            <div class="invalid-feedback">
                必要欄位
            </div>
        </div>

        <div class="mb-3">
            <label for="name_en" class="form-label">英文名稱</label>
            <input type="text" class="form-control" id="name_en" name="name_en" 
                   placeholder="請輸入餐廳英文名稱..." value="{{restaurant.name_en}}">
        </div>

        <div class="mb-3">
            <label for="category" class="form-label">餐廳類別*</label>
            <select class="form-select" id="category" name="category" 
                     required aria-label="select example">
            <option value="">請選擇餐廳類別...</option>
            <option value="義式餐廳">義式餐廳</option>
            <option value="中東料理">中東料理</option>
            <option value="日本料理">日本料理</option>
            <option value="美式">美式</option>
            <option value="咖啡">咖啡</option>
            <option value="酒吧">酒吧</option>
            </select>
            <div class="invalid-feedback">
                必要欄位
            </div>
        </div>

        <div class="mb-3">
            <label for="image" class="form-label">圖片位址</label>
            <input type="url" class="form-control" id="image" name="image" 
                   placeholder="請輸入圖片Url..." value="{{restaurant.image}}">
            <div class="invalid-feedback">
                圖片Url格式不正確 (須包含protocol)
            </div>
        </div>

        <div class="mb-3">
            <label for="location" class="form-label">餐廳地址</label>
            <input type="text" class="form-control" id="location" name="location" 
            placeholder="請輸入餐廳地址..." value="{{restaurant.location}}">
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">餐廳電話</label>
            <input type="tel" class="form-control" id="phone" name="phone" 
                   placeholder="請輸入餐廳電話..." value="{{restaurant.phone}}" pattern="[- \d]*">
            <div class="invalid-feedback">
                電話格式不正確
            </div>
        </div>

        <div class="mb-3">
            <label for="google_map" class="form-label">Google地圖位址</label>
            <input type="url" class="form-control" id="google_map" name="google_map" 
            placeholder="請輸入Google Map Url..." value="{{restaurant.google_map}}">
            <div class="invalid-feedback">
                地圖Url格式不正確 (須包含protocol)
            </div>
        </div>

        <div class="mb-3">
            <label for="rating" class="form-label">評分</label>
            <input type="number" class="form-control" id="rating" name="rating" 
                   placeholder="請輸入評分..." value="{{restaurant.rating}}" 
                   min="1" max="5" step="0.1" >
            <div class="invalid-feedback">
                評分格式不正確 (1-10分,最小單位0.1)
            </div>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">餐廳描述</label>
            <textarea class="form-control" id="description" name="description" 
                      placeholder="請輸入餐廳描述...">
                {{restaurant.description}}
            </textarea>
        </div>

        <div class="mb-3">
            <button class="btn btn-primary" type="submit" >修改</button>
            <a class="btn btn-secondary" href="/">返回</a>
        </div>
    </form>

    </div>
  </div>
</div>

<script>

    //select-option元件的預設值必須用js來設定

    //取得nodelist後，用展開運算符轉成陣列
    const options = [...document.querySelectorAll('option')];
    options.find( option => option.value === '{{restaurant.category}}' ).selected="true";

</script>